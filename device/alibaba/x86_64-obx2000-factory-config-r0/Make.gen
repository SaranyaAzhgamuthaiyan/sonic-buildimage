.ONESHELL:
SHELL = /bin/bash
.SHELLFLAGS += -e
n := 0
slot_step ?= 1
all:
	@(n=$(n); \
        slot_step=$(slot_step); \
        while [ $${n} -lt $${NUM_ASIC} ]; do \
            slot=`expr $$n + 1`; \
            asic_id=$$n linecard_id=$${slot} j2 config_db.json.j2 > config_db$$n.json; \
            n=`expr $$n + $${slot_step}`; \
        done;)
	@(j2 flexcounter.json.j2 > flexcounter.json;)
